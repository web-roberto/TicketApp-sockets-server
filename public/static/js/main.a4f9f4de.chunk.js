(this["webpackJsonpticket-app"]=this["webpackJsonpticket-app"]||[]).push([[0],{168:function(e,t,a){e.exports=a(282)},173:function(e,t,a){},196:function(e,t){},282:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(43),l=a.n(c),o=(a(173),a(36)),i=a(155),u=a.n(i),m=Object(n.createContext)(),s=function(e){var t=e.children,a=function(e){var t=Object(n.useMemo)((function(){return u.a.connect(e)}),[e]),a=Object(n.useState)(!1),r=Object(o.a)(a,2),c=r[0],l=r[1];return Object(n.useEffect)((function(){l(t.connected)}),[t]),Object(n.useEffect)((function(){t.on("connect",(function(){l(!0)}))}),[t]),Object(n.useEffect)((function(){t.on("disconnect",(function(){l(!1)}))}),[t]),{socket:t,online:c}}("https://ticketapp-socket.herokuapp.com/"),c=a.socket,l=a.online;return r.a.createElement(m.Provider,{value:{socket:c,online:l}},t)},E=Object(n.createContext)(),p=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(o.a)(a,2),l=c[0],i=c[1];return r.a.createElement(E.Provider,{value:{ocultarMenu:l,showMenu:function(){i(!1)},hideMenu:function(){i(!0)}}},t)},f=a(287),g=a(294),b=a(299),d=a(300),h=a(301),k=a(57),y=a(25),j=a(291),O=a(284),v=a(290),x=a(293),S=a(292),T=a(166),I=a(296),C=function(e){var t=Object(n.useContext)(E),a=t.showMenu,r=t.hideMenu;Object(n.useEffect)((function(){e?r():a()}),[e,r,a])},w=function(){return{agente:localStorage.getItem("agente"),escritorio:localStorage.getItem("escritorio")}},F=j.a.Title,M=j.a.Text,N={labelCol:{span:8},wrapperCol:{span:14}},P={wrapperCol:{offset:8,span:14}},z=function(){var e=Object(y.g)(),t=Object(n.useState)(w()),a=Object(o.a)(t,1)[0];C(!1);return a.agente&&a.escritorio?r.a.createElement(y.a,{to:"/escritorio"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{level:2},"Login"),r.a.createElement(M,null,"Type your name and your desk"),r.a.createElement(O.a,null),r.a.createElement(v.a,Object.assign({},N,{name:"basic",initialValues:{remember:!0},onFinish:function(t){var a=t.agente,n=t.escritorio;localStorage.setItem("agente",a),localStorage.setItem("escritorio",n),e.push("/escritorio")},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(v.a.Item,{label:"Name of the Office Worker",name:"agente",rules:[{required:!0,message:"Please type your name"}]},r.a.createElement(x.a,null)),r.a.createElement(v.a.Item,{label:"Desk",name:"escritorio",rules:[{required:!0,message:"Type the number of desk"}]},r.a.createElement(S.a,{min:1,max:99})),r.a.createElement(v.a.Item,P,r.a.createElement(T.a,{type:"primary",htmlType:"submit",shape:"round"},r.a.createElement(I.a,null),"Login"))))},L=a(285),W=a(286),Y=a(289),q=a(288),A=a(295),D=a(125),H=a.n(D),J=a(162),B=function(){var e=Object(J.a)(H.a.mark((function e(){var t,a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://ticketapp-socket.herokuapp.com//ultimos");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a.ultimos);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=j.a.Title,Q=j.a.Text,V=function(){C(!0);var e=Object(n.useContext)(m).socket,t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){return e.on("ticket-asignado",(function(e){l(e)})),function(){e.off("ticket-asignado")}}),[e]),Object(n.useEffect)((function(){B().then(l)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(K,{level:1},"Attending to the client"),r.a.createElement(L.a,null,r.a.createElement(W.a,{span:12},r.a.createElement(Y.b,{dataSource:c.slice(0,3),renderItem:function(e){return r.a.createElement(Y.b.Item,null,r.a.createElement(q.a,{style:{width:300,marginTop:16},actions:[r.a.createElement(A.a,{color:"volcano"}," ",e.agente," "),r.a.createElement(A.a,{color:"magenta"}," Desk: ",e.escritorio," ")]},r.a.createElement(K,null," No. ",e.numero)))}})),r.a.createElement(W.a,{span:12},r.a.createElement(O.a,null," History "),r.a.createElement(Y.b,{dataSource:c.slice(3),renderItem:function(e){return r.a.createElement(Y.b.Item,null,r.a.createElement(Y.b.Item.Meta,{title:"Ticket No. ".concat(e.numero),description:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{type:"secondary"},"At the desk: "),r.a.createElement(A.a,{color:"magenta"}," ",e.numero," "),r.a.createElement(Q,{type:"secondary"}," Office Workerr: "),r.a.createElement(A.a,{color:"volcano"}," ",e.agente," "))}))}}))))},G=a(297),R=j.a.Title,U=j.a.Text,X=function(){C(!0);var e=Object(n.useContext)(m).socket,t=Object(n.useState)(null),a=Object(o.a)(t,2),c=a[0],l=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(W.a,{span:14,offset:6,align:"center"},r.a.createElement(R,{level:3},"Press the button to get a new ticket"),r.a.createElement(T.a,{type:"primary",shape:"round",icon:r.a.createElement(G.a,null),size:"large",onClick:function(){e.emit("solicitar-ticket",null,(function(e){l(e)}))}},"New Ticket"))),c&&r.a.createElement(L.a,{style:{marginTop:100}},r.a.createElement(W.a,{span:14,offset:6,align:"center"},r.a.createElement(U,{level:2},"You number"),r.a.createElement("br",null),r.a.createElement(U,{type:"success",style:{fontSize:55}},c.numero))))},Z=a(298),$=a(78),_=j.a.Title,ee=j.a.Text,te=function(){C(!1);var e=Object(n.useState)(w()),t=Object(o.a)(e,1)[0],a=Object(n.useContext)(m).socket,c=Object(n.useState)(null),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(y.g)();return t.agente&&t.escritorio?r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(W.a,{span:20},r.a.createElement(_,{level:2},t.agente),r.a.createElement(ee,null,"You are working in the desk: "),r.a.createElement(ee,{type:"success"}," ",t.escritorio," ")),r.a.createElement(W.a,{span:4,align:"right"},r.a.createElement(T.a,{shape:"round",type:"danger",onClick:function(){localStorage.clear(),s.replace("/ingresar")}},r.a.createElement(Z.a,null),"Exit"))),r.a.createElement(O.a,null),i&&r.a.createElement(L.a,null,r.a.createElement(W.a,null,r.a.createElement(ee,null,"You are attending the ticket number: "),r.a.createElement(ee,{style:{fontSize:30},type:"danger"},i.numero))),r.a.createElement(L.a,null,r.a.createElement(W.a,{offset:18,span:6,align:"right"},r.a.createElement(T.a,{onClick:function(){a.emit("siguiente-ticket-trabajar",t,(function(e){u(e)}))},shape:"round",type:"primary"},r.a.createElement($.a,null),"Next")))):r.a.createElement(y.a,{to:"/ingresar"})},ae=f.a.Sider,ne=f.a.Content,re=function(){var e=Object(n.useContext)(E).ocultarMenu;return r.a.createElement(k.a,null,r.a.createElement(f.a,{style:{height:"100vh"}},r.a.createElement(ae,{collapsedWidth:"0",breakpoint:"md",hidden:e},r.a.createElement("div",{className:"logo"}),r.a.createElement(g.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},r.a.createElement(g.a.Item,{key:"1",icon:r.a.createElement(b.a,null)},r.a.createElement(k.b,{to:"/ingresar"},"Login")),r.a.createElement(g.a.Item,{key:"2",icon:r.a.createElement(d.a,null)},r.a.createElement(k.b,{to:"/cola"},"Ticket Queue")),r.a.createElement(g.a.Item,{key:"3",icon:r.a.createElement(h.a,null)},r.a.createElement(k.b,{to:"/crear"},"Create Ticket")))),r.a.createElement(f.a,{className:"site-layout"},r.a.createElement(ne,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280}},r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/ingresar",component:z}),r.a.createElement(y.b,{path:"/cola",component:V}),r.a.createElement(y.b,{path:"/crear",component:X}),r.a.createElement(y.b,{path:"/escritorio",component:te}),r.a.createElement(y.a,{to:"/ingresar"}))))))},ce=function(){return r.a.createElement(s,null,r.a.createElement(p,null,r.a.createElement(re,null)))};l.a.render(r.a.createElement(ce,null),document.getElementById("root"))}},[[168,1,2]]]);
//# sourceMappingURL=main.a4f9f4de.chunk.js.map